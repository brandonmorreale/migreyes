var $currentPhoto,closeProject,escapable,filterEssays,getHeight,longestFirst,newestFirst,nextPhoto,oldestFirst,parallax,previousPhoto,responsivePSA,responsiveTest,setHeight,setupGallery,shortestFirst,showWidth,swapBio,toggleBio;parallax=function(element,direction,start,stop,rate){return $(window).on("scroll",function(){var position;return position=document.body.scrollTop,position>=start&&stop>=position?element.css(direction,$(window).scrollTop()*rate):void 0})},swapBio=function(bio){var $bio;return $bio=$("section.biography"),$bio.find("article:not(bio)").fadeOut(function(){return $bio.find(bio).fadeIn()})},toggleBio=function(bio){var position;return position=document.body.scrollTop,position>200?$("body").animate({scrollTop:0},{duration:500,complete:function(){return swapBio(bio)}}):swapBio(bio)},$(function(){var $portraitOverlay,$portraitToggle;return $portraitToggle=$(".portrait-toggle"),$portraitOverlay=$(".portrait"),$portraitToggle.find("img").on("click",function(){return $portraitOverlay.fadeIn()}),$portraitOverlay.on("click",function(){return $(window).width()>=768?$(this).fadeOut():void 0}),$('[data-toggle~="bio"]').on("click",function(){return toggleBio($(this).data("bio"))}),parallax($portraitToggle,"top",-40,250,-1.5)}),$currentPhoto=1,showWidth=function(){return document.title="Mig Reyes "+$(window).width()},setupGallery=function(){var $gallery,$height,$photoPosition,$photos;return $gallery=$(".gallery"),$photos=$gallery.find("figure"),$height=getHeight(),$photoPosition=0,setHeight($gallery,$height),setHeight($photos,$height),$photos.each(function(){return $(this).css({left:$photoPosition,width:$(window).width()}),$photoPosition+=$(window).width()})},getHeight=function(){return Math.floor(.535*$(window).width())},setHeight=function(el,height){var $el;return $el=$(el),$el.height(height)},nextPhoto=function(){var $gallery,distance;return $gallery=$(".photos"),distance=$(window).width()*$currentPhoto,$currentPhoto+=1,$currentPhoto>$gallery.find("figure").length?($gallery.animate({left:"0"},500),$currentPhoto=1):$gallery.animate({left:-distance},500)},previousPhoto=function(){var $gallery,$lastPhoto,distance;return $gallery=$(".photos"),$lastPhoto=$gallery.find("figure").length,$currentPhoto-=1,1>$currentPhoto?(distance=$(window).width()*($lastPhoto-1),$gallery.animate({left:-distance},500),$currentPhoto=$lastPhoto):(distance=$(window).width()*($currentPhoto-1),$gallery.animate({left:-distance},500))},$(function(){var $bike;return setupGallery(),$(window).resize(function(){return setupGallery()}),$(window).width()>=768&&$(".photos figure").on("click",function(){return nextPhoto()}),$('[data-photo~="next"]').on("click",function(){return nextPhoto()}),$('[data-photo~="previous"]').on("click",function(){return previousPhoto()}),$bike=$(".hero figure"),$(window).on("scroll",function(){return $bike.css("top",.5*$(window).scrollTop())}),$(window).bind("keydown",function(event){switch(event.keyCode){case 37:return previousPhoto();case 39:return nextPhoto()}})}),closeProject=function(){return document.title="The work & play of Mig Reyes",$("[data-project-header]").text("Work and play"),window.history.pushState("","","/makes"),$("[data-project]").show(),$("div.project-details").hide(),$('[data-behavior="close"]').hide()},$(function(){var $closeButton,$headline,$projects;return $projects=$('[data-behavior="project"]'),$headline=$("[data-project-header]"),$closeButton=$('[data-behavior="close"]'),$("[data-project]").click(function(){var $details,$project,$projectName,$url;return $projectName=$(this).find("h1").text(),$headline.text($projectName),$(this).siblings().hide(),$details=$(this).find(".project-details"),$details.length?$details.show():($url=$(this).find("a").attr("href"),$project=$('<div class="project-details">').load($url+" .details"),$(this).append($project)),document.title=$projectName+" by Mig Reyes",window.history.pushState("","",$url),$closeButton.show(),!1}),$closeButton.click(function(){return closeProject()})}),responsiveTest=function(){return $(window).resize(function(){return document.title=$(window).width()})},responsivePSA=function(){var $message,resizeTimer;return $message=$("aside.public-service-announcement"),resizeTimer=void 0,$(window).resize(function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?void 0:($message.fadeIn(),resizeTimer&&clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){return resizeTimer=null,$message.fadeOut()},1200))})},escapable=function(){return $('[data-behavior~="escapable"]').fadeOut()},$(function(){return $(window).bind("keydown",function(event){switch(event.keyCode){case 27:return escapable(),closeProject()}})}),filterEssays=function(essayType){var $essayList,$essays,$favoriteToggle,$nonfavorites;switch($essays=$("section.essays ul"),$essayList=$essays.find("li"),$nonfavorites=$essays.find("li:not([data-favorite])"),$favoriteToggle=$('[data-essay-filter~="favorites"]'),essayType){case"favorites":return $favoriteToggle.hasClass("selected")?$nonfavorites.show():$nonfavorites.hide(),$favoriteToggle.toggleClass("selected");case"recent":return $essayList.sort(newestFirst).appendTo($essays);case"shortest":return $essayList.sort(shortestFirst).appendTo($essays)}},shortestFirst=function(a,b){return $(b).data("words")<$(a).data("words")?1:-1},longestFirst=function(a,b){return $(b).data("words")>$(a).data("words")?1:-1},newestFirst=function(a,b){return $(b).data("date")<$(a).data("date")?1:-1},oldestFirst=function(a,b){return $(b).data("date")>$(a).data("date")?1:-1},$(function(){var $delay,$essayList,$essays,$thoughtList;return $essays=$("section.essays ul"),$essayList=$essays.find("li"),$essayList.each(function(){var $readingTime,$words;return $words=$(this).data("words"),$readingTime=Math.floor($words/3),60>$readingTime?$(this).find("[data-reading-time]").text($readingTime+" second read"):($readingTime=Math.floor($readingTime/60),$(this).find("[data-reading-time]").text($readingTime+" minute read"))}),$delay=0,$essayList.each(function(){return $delay+=50,$(this).css({opacity:0}),$(this).delay($delay).fadeTo(500,1)}),$("[data-essay-filter]").click(function(){return filterEssays($(this).data("essay-filter")),$(this).find("span").hasClass("radio")?($(this).addClass("selected"),$(this).siblings().removeClass("selected")):void 0}),$thoughtList=$("[data-thought]"),$thoughtList.each(function(){return $delay+=50,$(this).css({opacity:0}),$(this).delay($delay).fadeTo(500,1)})});